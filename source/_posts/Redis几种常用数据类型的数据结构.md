---
title: Redis几种常用数据类型的数据结构
date: 2024-09-29 15:57:40
tags: Redis
categories: Redis
---
### 以下是redis-7版本以下适用
### string
```
int编码：当字符串长度小于等于12字节并且字符串可以表示为整数时，Redis会使用int编码。
        这样可以节省内存，并且在执行一些命令时可以直接进行数值计算。
embstr编码：当字符串长度小于等于39字节时，Redis会使用embstr编码。这种编码方式会将
           字符串和存储它的结构体一起分配在内存中，这样可以减少内存碎片和结构体的开销。
raw编码：当字符串长度大于39字节或者字符串不能表示为整数时，Redis会使用raw编码。
         这种编码方式直接将字符串存储在一个结构体中，没有进行任何优化。
```
### hash
```
ziplist（压缩列表）：当Hash类型的元素比较少，且元素的大小比较小（小于64字节）时，Redis采用ziplist作为Hash类型的内部编码。
                   ziplist是一种紧凑的、压缩的列表结构，可以节省内存空间。但是，ziplist只能进行线性查找，不支持快速的随机访问。
hashtable（字典）：当Hash类型的元素比较多，或者元素的大小比较大（大于64字节）时，Redis采用hashtable作为Hash类型的内部编码。
                  hashtable是一种基于链表的哈希表结构，可以快速地进行随机访问。但是，hashtable需要占用更多的内存空间。
```
### list
```
ziplist
        ziplist是一种特殊的编码方式，它可以将小数据量的列表存储在一个连续的内存块中，节省了内存空间，同时还可以提高存取效率。
       ziplist编码的列表最大长度为2^16-1个元素，每个元素可以是字符串类型、整数类型或浮点数类型。在ziplist中，
      每个元素都被存储为一个字节数组，并包含一个前缀和一个后缀，用于标识该元素的类型和长度。

linkedlist
         linkedlist是一种常规的双向链表结构，它可以存储任意长度的列表，并且支持高效的插入和删除操作。在linkedlist中，
         每个节点都包含了一个指向前一个节点和后一个节点的指针，以及一个存储元素数据的指针。
         linkedlist适用于存储大数量的列表，它没有像ziplist那样的内存限制，但是会占用更多的内存空间。
```
### set
```
intset（整数集合）：当Set类型只包含整数类型的数据，并且元素数量较少（小于512个）时，Redis会使用intset作为Set类型的内部编码。
                   intset是一种紧凑的、压缩的整数集合结构，可以节省内存空间，并且支持快速的查找、插入和删除操作。在intset中，
                   所有元素都按照从小到大的顺序排列，并且可以使用不同的编码方式（16位、32位、64位）存储不同大小范围内的整数。
hashtable（字典）：当Set类型包含字符串类型或者元素数量较多时，Redis会使用hashtable作为Set类型的内部编码。hashtable是一种基于链表的哈希表结构，
                  可以快速地进行随机访问、插入和删除操作。在hashtable中，每个元素都被存储为一个字符串，并且使用哈希函数将字符串映射到一个桶中，然后在桶中进行查找、插入和删除操作。
```
### zset
```
ziplist编码：当Zset中元素个数小于128个，并且所有元素的长度都小于64字节时，Redis会使用ziplist编码存储Zset。 
            这种编码方式可以节省内存空间，并且可以提高存取效率，但是不支持随机访问和范围查询。
skiplist编码：当Zset中元素个数大于等于128个，或者有一个元素的长度大于64字节时，Redis会使用skiplist编码存储Zset。
              这种编码方式支持高效的随机访问和范围查询，但是需要占用更多的内存空间。
```
